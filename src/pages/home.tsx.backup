import { useQuery } from "@tanstack/react-query";
import { useState } from "react";
import Navigation from "@/components/layout/navigation";
import FearGreedIndex from "@/components/market/fear-greed-index";
import EnhancedAnalysisCard from "@/components/articles/enhanced-analysis-card";
import AIInsightsCard from "@/components/insights/ai-insights-card";
import CryptoInsightsCard from "@/components/insights/crypto-insights-card";
import SentimentDashboard from "@/components/market/sentiment-dashboard";
import DagensStatistikk from "@/components/market/dagens-statistikk";
import { TrendingDown, Bitcoin, TrendingUp, Building2, Factory, Target, Globe, Cpu, Shield, Crown, Rocket } from "lucide-react";
import type { Article, MarketData } from "@shared/schema";

export default function Home() {
  const [viewMode, setViewMode] = useState<'makro' | 'krypto'>('makro');
  const { data: allArticles, isLoading } = useQuery<Article[]>({
    queryKey: ["/api/articles"],
  });

  const { data: marketData } = useQuery<MarketData[]>({
    queryKey: ["/api/market-data"],
    refetchInterval: 30000,
  });

  const { data: dailyPulse } = useQuery<{ pulse: string }>({
    queryKey: ["/api/daily-pulse"],
    refetchInterval: 3600000, // Refresh every hour
  });

  // Filter cryptocurrency data
  const cryptoData = marketData?.filter(item => 
    ["BTC/NOK", "ETH/NOK", "ADA/NOK", "XRP/NOK", "SOL/NOK", "DOT/NOK", "AVAX/NOK", "MATIC/NOK", "LINK/NOK", "UNI/NOK"].includes(item.symbol)
  ) || [];

  // Filter stock data for Norwegian companies
  const stockData = marketData?.filter(item => 
    !["BTC/NOK", "ETH/NOK", "ADA/NOK", "XRP/NOK", "SOL/NOK", "DOT/NOK", "AVAX/NOK", "MATIC/NOK", "LINK/NOK", "UNI/NOK"].includes(item.symbol) &&
    !item.symbol.includes("/NOK")
  ) || [];

  // Prepare sector data for Dagens Statistikk component
  const sectorData = (() => {
    if (viewMode === 'krypto') {
      // Crypto sector data
      const topCrypto = cryptoData.slice(0, 5);
      return topCrypto.map(crypto => ({
        name: crypto.name.replace('/NOK', ''),
        change: parseFloat(crypto.changePercent.replace(/[+%]/g, '')),
        icon: crypto.symbol === 'BTC/NOK' ? '₿' : 
              crypto.symbol === 'ETH/NOK' ? '⟠' : 
              crypto.symbol === 'ADA/NOK' ? '🔺' : 
              crypto.symbol === 'SOL/NOK' ? '☀️' : '🪙'
      }));
    } else {
      // Norwegian stock sectors
      const sectorMapping = [
        { symbol: 'EQNR', name: 'Energi', icon: '🛢️' },
        { symbol: 'DNB', name: 'Bank', icon: '🏦' },
        { symbol: 'MOWI', name: 'Sjømat', icon: '🐟' },
        { symbol: 'TEL', name: 'Telekom', icon: '📡' },
        { symbol: 'ANDF', name: 'Oppdrett', icon: '🐠' }
      ];
      
      return sectorMapping.map(sector => {
        const stockItem = stockData.find(item => item.symbol === sector.symbol);
        return {
          name: sector.name,
          change: stockItem ? parseFloat(stockItem.changePercent.replace(/[+%]/g, '')) : 0,
          icon: sector.icon
        };
      }).filter(item => item.change !== 0); // Only show sectors with data
    }
  })();

  // Filter articles based on content relevance
  const filteredArticles = allArticles?.filter(article => {
    if (viewMode === 'krypto') {
      // Only show crypto-related articles in crypto mode
      const cryptoKeywords = [
        'bitcoin', 'ethereum', 'krypto', 'cryptocurrency', 'blockchain', 'btc', 'eth', 'crypto',
        'coindesk', 'cointelegraph', 'cryptonews', 'defi', 'nft', 'web3', 'blackrock',
        'solana', 'cardano', 'ripple', 'polkadot', 'avalanche', 'polygon', 'chainlink', 'uniswap',
        'whale', 'hodl', 'staking', 'yield farming', 'liquidated', 'outflow', 'inflow', 'pepe'
      ];
      const contentLower = `${article.title} ${article.summary} ${article.author}`.toLowerCase();
      return cryptoKeywords.some(keyword => contentLower.includes(keyword));
    } else {
      // Makro mode: Show Norwegian financial articles, exclude crypto
      const cryptoKeywords = [
        'bitcoin', 'ethereum', 'cryptocurrency', 'blockchain', 'btc', 'eth', 'crypto',
        'coindesk', 'cointelegraph', 'cryptonews', 'defi', 'nft', 'web3', 'blackrock',
        'solana', 'cardano', 'ripple', 'polkadot', 'avalanche', 'polygon', 'chainlink', 'uniswap',
        'whale', 'hodl', 'staking', 'yield farming', 'liquidated', 'outflow', 'inflow', 'pepe'
      ];
      
      // Only Norwegian sources - exclude all English sources
      const norwegianSources = ['E24', 'Dagens Næringsliv', 'Teknisk Ukeblad', 'Kapital', 'Hegnar'];
      const englishSources = ['CoinDesk', 'CoinTelegraph', 'CryptoNews'];
      
      const isNorwegianSource = norwegianSources.includes(article.author);
      const isEnglishSource = englishSources.includes(article.author);
      
      const contentLower = `${article.title} ${article.summary} ${article.author}`.toLowerCase();
      const hasCryptoContent = cryptoKeywords.some(keyword => contentLower.includes(keyword));
      
      // ONLY show Norwegian sources, never English sources, and no crypto content
      return isNorwegianSource && !isEnglishSource && !hasCryptoContent;
    }
  }) || [];

  if (isLoading) {
    return (
      <div className="min-h-screen bg-gray-50">
        <Navigation />
        <main className="max-w-4xl mx-auto px-6 py-8">
          <div className="animate-pulse space-y-6">
            <div className="h-32 bg-gray-200 rounded-lg"></div>
            <div className="h-48 bg-gray-200 rounded-lg"></div>
            <div className="space-y-4">
              <div className="h-24 bg-gray-200 rounded-lg"></div>
              <div className="h-24 bg-gray-200 rounded-lg"></div>
            </div>
          </div>
        </main>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-gray-50">
      <Navigation />
      
      <div className="relative">
        {/* Nordnet Affiliate Banner - Fixed position on desktop */}
        <div className="hidden xl:block fixed right-4 top-24 z-40">
          <a href="https://go.adt212.net/t/t?a=1939425697&as=1978602532&t=2&tk=1" target="_blank" rel="noopener noreferrer">
            <img 
              src="https://track.adtraction.com/t/t?a=1939425697&as=1978602532&t=1&tk=1&i=1" 
              width="160" 
              height="600" 
              style={{ border: 0 }}
              alt="Nordnet"
              className="shadow-lg rounded-lg hover:shadow-xl transition-shadow"
            />
          </a>
        </div>
        
        <main className="max-w-4xl mx-auto px-4 sm:px-6 py-4 sm:py-8 space-y-6 sm:space-y-8">
        {/* Mode Toggle Buttons */}
        <section className="flex justify-center gap-1 mb-6">
          <button
            onClick={() => setViewMode('makro')}
            className={`px-4 py-2 text-sm font-medium transition-all border-b-2 ${
              viewMode === 'makro'
                ? 'text-black border-black'
                : 'text-gray-500 border-transparent hover:text-gray-700'
            }`}
          >
            Makro
          </button>
          <span className="px-2 py-2 text-gray-300">|</span>
          <button
            onClick={() => setViewMode('krypto')}
            className={`px-4 py-2 text-sm font-medium transition-all border-b-2 ${
              viewMode === 'krypto'
                ? 'text-black border-black'
                : 'text-gray-500 border-transparent hover:text-gray-700'
            }`}
          >
            Krypto
          </button>
        </section>

        {/* Today's Pulse Section */}
        <section>
          <div className="flex items-center justify-between mb-4">
            <h2 className="text-lg font-semibold text-black flex items-center gap-3">
              <span className="text-xl">{viewMode === 'makro' ? '📈' : '₿'}</span>
              DAGENS PULS
            </h2>
          </div>
          <div className={`bg-gradient-to-r ${
            viewMode === 'makro' 
              ? 'from-blue-50 to-sky-50 border-blue-200' 
              : 'from-orange-50 to-amber-50 border-orange-200'
          } border rounded-lg p-6 relative`}>
            <div className="flex items-center justify-end mb-3">
              <span className="text-xs text-gray-600 font-medium">Oppdatert nå</span>
            </div>
            <div className="flex items-center space-x-3">
              <span className="text-lg font-medium text-black">
                {viewMode === 'makro' ? (
                  dailyPulse?.pulse || "Analyserer dagens økonomiske utvikling..."
                ) : (
                  (() => {
                    if (!cryptoData || cryptoData.length === 0) return "Henter kryptovaluta-data...";
                    
                    // Find dagens største endring (positiv eller negativ)
                    const sortedCryptos = cryptoData
                      .filter(crypto => crypto.changePercent && crypto.symbol?.includes('/NOK'))
                      .sort((a, b) => {
                        const aChange = Math.abs(parseFloat(a.changePercent?.replace('%', '').replace('+', '') || '0'));
                        const bChange = Math.abs(parseFloat(b.changePercent?.replace('%', '').replace('+', '') || '0'));
                        return bChange - aChange;
                      });
                    
                    if (sortedCryptos.length === 0) return "Analyserer kryptovaluta-bevegelser...";
                    
                    const topMover = sortedCryptos[0];
                    const change = topMover.changePercent || '0%';
                    const isPositive = !change.includes('-');
                    const direction = isPositive ? 'stiger' : 'faller';
                    const symbol = topMover.symbol?.replace('/NOK', '') || topMover.name;
                    
                    return `${topMover.name} ${direction} ${change} til ${topMover.price} - dagens største krypto-bevegelse i NOK.`;
                  })()
                )}
              </span>
            </div>
          </div>
        </section>

        {/* Dagens Statistikk Section */}
        <section>
          <h2 className={`text-lg font-semibold text-black mb-4 inline-block px-3 py-1 rounded ${
            viewMode === 'makro' ? 'bg-gray-300' : 'bg-orange-300'
          }`}>
            Dagens Statistikk
          </h2>
          <DagensStatistikk data={sectorData} />
        </section>

        {/* Enhanced Insights Section with Market Correlation */}
        <section>
          <h2 className="text-lg font-semibold text-black mb-4">
            {viewMode === 'makro' ? 'Innsikt' : 'Krypto Innsikt'}
          </h2>
          {viewMode === 'makro' ? (
            <AIInsightsCard />
          ) : (
            <CryptoInsightsCard />
          )}
        </section>

        {/* Legacy Insights Fallback */}
        <section style={{ display: 'none' }}>
          <div className="space-y-4">
            {allArticles && allArticles.length > 1 ? (
              allArticles.slice(1, 4).map((article, index) => (
                <div key={article.id} className="bg-white rounded-lg border border-gray-200 p-6">
                  <p className="text-gray-800 leading-relaxed">
                    {article.summary}
                  </p>
                </div>
              ))
            ) : (
              <>
                <div className="bg-white rounded-lg border border-gray-200 p-6">
                  <p className="text-gray-800 leading-relaxed">
                    <span className="inline-block bg-green-100 text-green-800 px-2 py-1 rounded text-sm mr-1">▲ Equinor</span>
                    stiger 3% mens andre energiaksjer faller. Equinors sterke balanse og høye utbytte tiltrekker investorer i urolige tider.
                  </p>
                </div>
                
                <div className="bg-white rounded-lg border border-gray-200 p-6">
                  <p className="text-gray-800 leading-relaxed">
                    <span className="inline-block bg-green-100 text-green-800 px-2 py-1 rounded text-sm mr-1">▲ Oslo Boligpriser</span>
                    fortsetter å stige til tross for 
                    <span className="inline-block bg-red-100 text-red-800 px-2 py-1 rounded text-sm mx-1">▼ Norske 10-år</span>
                    obligasjonsrenter som faller. Boligmarkedet forblir robust selv med markedsuro.
                  </p>
                </div>

                <div className="bg-white rounded-lg border border-gray-200 p-6">
                  <p className="text-gray-800 leading-relaxed">
                    <span className="inline-block bg-red-100 text-red-800 px-2 py-1 rounded text-sm mr-1">▼ DNB</span>
                    faller 2% på rentescenario. Bankens utlånsmargin kan bli presset av lavere renter og økt konkurranse i boliglånsmarkedet.
                  </p>
                </div>
              </>
            )}
          </div>
        </section>

        {/* Big Picture Section */}
        <section>
          <h2 className="text-lg font-semibold text-black mb-4">
            {viewMode === 'makro' ? 'Helhetsbilde' : 'KryptoFokus'}
          </h2>
          <div className="bg-white rounded-lg border border-gray-200 p-6">
            <div className="space-y-5 text-gray-800 leading-relaxed">
              {viewMode === 'makro' ? (
                <>
                  {/* Current Market Developments */}
                  <div>
                    <h3 className="font-semibold text-gray-900 mb-2 flex items-center gap-2">
                      <Building2 className="w-4 h-4 text-blue-600" />
                      Markedsdynamikk
                    </h3>
                    <p className="mb-3">
                      {(() => {
                        // Find ONLY Norwegian financial articles for market dynamics
                        const norwegianSources = ['E24', 'Dagens Næringsliv', 'Teknisk Ukeblad', 'Kapital', 'Hegnar'];
                        const englishSources = ['CoinDesk', 'CoinTelegraph', 'CryptoNews'];
                        
                        const norwegianArticles = allArticles?.filter(article => {
                          const isNorwegianSource = norwegianSources.includes(article.author);
                          const isEnglishSource = englishSources.includes(article.author);
                          const contentLower = `${article.title} ${article.summary}`.toLowerCase();
                          const hasCryptoContent = contentLower.includes('bitcoin') || contentLower.includes('crypto') || contentLower.includes('ethereum');
                          
                          // Exclude non-financial content (trade unions, politics, general news)
                          const isFinanciallyRelevant = !contentLower.includes('lo-leder') && 
                                                       !contentLower.includes('fagforening') &&
                                                       !contentLower.includes('arbeiderparti') &&
                                                       !contentLower.includes('valg') &&
                                                       !contentLower.includes('politikk') &&
                                                       !contentLower.includes('kommune') &&
                                                       !contentLower.includes('skole') &&
                                                       !contentLower.includes('helse');
                          
                          // STRICT: Only Norwegian sources, never English sources, no crypto, only financial content
                          return isNorwegianSource && !isEnglishSource && !hasCryptoContent && isFinanciallyRelevant;
                        });
                        
                        if (norwegianArticles && norwegianArticles.length > 0) {
                          const marketArticle = norwegianArticles.find(article => {
                            const content = `${article.title} ${article.summary}`.toLowerCase();
                            return content.includes('marked') || content.includes('økonomi') || 
                                   content.includes('equinor') || content.includes('toll') ||
                                   content.includes('investere') || content.includes('selskap');
                          }) || norwegianArticles[0];
                          
                          return `${marketArticle.summary.substring(0, 180)}...`;
                        }
                        
                        return "Henter norske markedsoppdateringer...";
                      })()}
                    </p>
                  </div>

                  {/* Key Sector Analysis */}
                  <div>
                    <h3 className="font-semibold text-gray-900 mb-2 flex items-center gap-2">
                      <Factory className="w-4 h-4 text-green-600" />
                      Sektoranalyse
                    </h3>
                    <p className="mb-3">
                      {stockData && stockData.length > 0 ? (
                        <>
                          {(() => {
                            // Find sector-specific articles and show with relevant stock data
                            const sectorArticles = allArticles?.filter(article => {
                              const title = article.title.toLowerCase();
                              const summary = article.summary.toLowerCase();
                              const isEnglishCrypto = ['coindesk', 'cointelegraph', 'cryptonews'].some(source => 
                                title.includes(source) || summary.includes(source) || article.author.toLowerCase().includes(source)
                              );
                              const hasCryptoTerms = title.includes('bitcoin') || title.includes('crypto') || 
                                                   title.includes('ethereum') || summary.includes('bitcoin') ||
                                                   summary.includes('crypto') || summary.includes('ethereum');
                              const hasSectorRelevance = title.includes('selskap') || title.includes('sektor') ||
                                                        title.includes('industri') || title.includes('marked') ||
                                                        summary.includes('selskap') || summary.includes('sektor');
                              
                              return !isEnglishCrypto && !hasCryptoTerms && hasSectorRelevance;
                            });
                            
                            if (sectorArticles && sectorArticles.length > 0) {
                              const article = sectorArticles[0];
                              
                              // Find relevant stocks for this article
                              const getRelevantStocks = (title: string, summary: string) => {
                                const content = `${title} ${summary}`.toLowerCase();
                                const relevantStocks = [];
                                
                                // Check for company mentions
                                if (content.includes('equinor') || content.includes('olje') || content.includes('energi')) {
                                  const equinorData = stockData?.find(s => s.symbol === 'EQNR');
                                  if (equinorData) relevantStocks.push(equinorData);
                                }
                                
                                if (content.includes('dnb') || content.includes('bank') || content.includes('finans')) {
                                  const dnbData = stockData?.find(s => s.symbol === 'DNB');
                                  if (dnbData) relevantStocks.push(dnbData);
                                }
                                
                                if (content.includes('telenor') || content.includes('telekom') || content.includes('mobil')) {
                                  const telenorData = stockData?.find(s => s.symbol === 'TEL');
                                  if (telenorData) relevantStocks.push(telenorData);
                                }
                                
                                return relevantStocks.slice(0, 2); // Max 2 stocks
                              };
                              
                              const relevantStocks = getRelevantStocks(article.title, article.summary);
                              
                              return (
                                <>
                                  {article.summary.substring(0, 120)}...
                                  {relevantStocks.map((stock, index) => (
                                    <span key={stock.symbol} className={`inline-block px-2 py-1 rounded text-sm mx-1 ${
                                      stock.isPositive ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'
                                    }`}>
                                      {stock.name} {stock.changePercent}
                                    </span>
                                  ))}
                                </>
                              );
                            }
                            
                            // Fallback to any Norwegian financial article
                            const norwegianArticles = allArticles?.filter(article => {
                              const title = article.title.toLowerCase();
                              const summary = article.summary.toLowerCase();
                              const isEnglishCrypto = ['coindesk', 'cointelegraph', 'cryptonews'].some(source => 
                                title.includes(source) || summary.includes(source) || article.author.toLowerCase().includes(source)
                              );
                              const hasCryptoTerms = title.includes('bitcoin') || title.includes('crypto') || 
                                                   title.includes('ethereum') || summary.includes('bitcoin') ||
                                                   summary.includes('crypto') || summary.includes('ethereum');
                              
                              return !isEnglishCrypto && !hasCryptoTerms;
                            });
                            
                            if (norwegianArticles && norwegianArticles.length > 0) {
                              return norwegianArticles[0].summary.substring(0, 140) + "...";
                            }
                            
                            return "Henter markedsanalyse...";
                          })()}
                          
                          {(() => {
                            // Find Norwegian financial articles excluding crypto
                            const norwegianFinancialArticles = allArticles?.filter(article => {
                              const title = article.title.toLowerCase();
                              const summary = article.summary.toLowerCase();
                              const isEnglishCrypto = ['coindesk', 'cointelegraph', 'cryptonews'].some(source => 
                                title.includes(source) || summary.includes(source) || article.author.toLowerCase().includes(source)
                              );
                              const hasCryptoTerms = title.includes('bitcoin') || title.includes('crypto') || 
                                                   title.includes('ethereum') || summary.includes('bitcoin') ||
                                                   summary.includes('crypto') || summary.includes('ethereum');
                              const hasNorwegianTerms = title.includes('norge') || title.includes('norsk') ||
                                                      summary.includes('norge') || summary.includes('norsk') ||
                                                      summary.includes('kr ') || summary.includes('million');
                              
                              return !isEnglishCrypto && !hasCryptoTerms && hasNorwegianTerms;
                            });
                            
                            if (norwegianFinancialArticles && norwegianFinancialArticles.length > 0) {
                              const text = norwegianFinancialArticles[0].summary.substring(0, 90);
                              return text.endsWith('.') ? text : `${text}...`;
                            }
                            
                            // If no specific matches, use any available Norwegian article
                            const anyNorwegianArticle = allArticles?.find(article => {
                              const title = article.title.toLowerCase();
                              const summary = article.summary.toLowerCase();
                              const isEnglishCrypto = ['coindesk', 'cointelegraph', 'cryptonews'].some(source => 
                                title.includes(source) || summary.includes(source) || article.author.toLowerCase().includes(source)
                              );
                              const hasCryptoTerms = title.includes('bitcoin') || title.includes('crypto') || 
                                                   title.includes('ethereum') || summary.includes('bitcoin') ||
                                                   summary.includes('crypto') || summary.includes('ethereum');
                              
                              return !isEnglishCrypto && !hasCryptoTerms;
                            });
                            
                            if (anyNorwegianArticle) {
                              const text = anyNorwegianArticle.summary.substring(0, 90);
                              return text.endsWith('.') ? text : `${text}...`;
                            }
                            
                            return "Henter markedsdata...";
                          })()}
                        </>
                      ) : (
                        (() => {
                          if (!allArticles || allArticles.length === 0) {
                            return "Henter sektoranalyse fra norske finanskilder...";
                          }
                          
                          // Find Norwegian sector-specific articles (different from company trends above)
                          const sectorArticles = allArticles.filter(article => {
                            const title = article.title.toLowerCase();
                            const summary = article.summary.toLowerCase();
                            const isEnglishCrypto = ['coindesk', 'cointelegraph', 'cryptonews'].some(source => 
                              title.includes(source) || summary.includes(source) || article.author.toLowerCase().includes(source)
                            );
                            const hasCryptoTerms = title.includes('bitcoin') || title.includes('crypto') || 
                                                 title.includes('ethereum') || summary.includes('bitcoin') ||
                                                 summary.includes('crypto') || summary.includes('ethereum');
                            const hasSectorTerms = title.includes('sektor') || title.includes('industri') ||
                                                 title.includes('olje') || title.includes('energi') ||
                                                 summary.includes('sektor') || summary.includes('industri') ||
                                                 summary.includes('olje') || summary.includes('energi');
                            
                            return !isEnglishCrypto && !hasCryptoTerms && hasSectorTerms;
                          });
                          
                          if (sectorArticles.length > 0) {
                            // Use second article if available to avoid duplication
                            const article = sectorArticles.length > 1 ? sectorArticles[1] : sectorArticles[0];
                            return `${article.summary.substring(0, 160)}...`;
                          }
                          
                          // Fallback to any Norwegian financial article not used above
                          const remainingArticles = allArticles.filter(article => {
                            const title = article.title.toLowerCase();
                            const summary = article.summary.toLowerCase();
                            const isEnglishCrypto = ['coindesk', 'cointelegraph', 'cryptonews'].some(source => 
                              title.includes(source) || summary.includes(source) || article.author.toLowerCase().includes(source)
                            );
                            const hasCryptoTerms = title.includes('bitcoin') || title.includes('crypto') || 
                                                 title.includes('ethereum') || summary.includes('bitcoin') ||
                                                 summary.includes('crypto') || summary.includes('ethereum');
                            
                            return !isEnglishCrypto && !hasCryptoTerms;
                          });
                          
                          if (remainingArticles.length > 1) {
                            // Use the second article to avoid duplication
                            return `${remainingArticles[1].summary.substring(0, 160)}...`;
                          }
                          
                          return "Analyserer norske sektorer og markedsutvikling...";
                        })()
                      )}
                    </p>
                  </div>

                  {/* Monetary Policy & Economy */}
                  <div>
                    <h3 className="font-semibold text-gray-900 mb-2">🏦 Pengepolitikk & Økonomi</h3>
                    <p className="mb-3">
                      {(() => {
                        if (!allArticles || allArticles.length === 0) return "Henter økonomiske oppdateringer...";
                        
                        // Look for economics/policy related articles with broader search
                        const economicArticle = allArticles.find(article => {
                          const searchText = (article.title + ' ' + article.summary).toLowerCase();
                          return searchText.includes('trump') && (searchText.includes('toll') || searchText.includes('økonomi')) ||
                                 searchText.includes('norges bank') || 
                                 searchText.includes('rente') ||
                                 searchText.includes('inflasjon') ||
                                 searchText.includes('økonomi') ||
                                 searchText.includes('arbeidsledighet') ||
                                 searchText.includes('finansminister') ||
                                 searchText.includes('statsbudsjett') ||
                                 searchText.includes('skatt');
                        });
                        
                        if (economicArticle) {
                          return `${economicArticle.summary.substring(0, 140)}...`;
                        }
                        
                        // Fallback to any relevant market news
                        return `${allArticles[0].summary.substring(0, 140)}...`;
                      })()}
                    </p>
                  </div>

                  {/* Investment Themes */}
                  <div>
                    <h3 className="font-semibold text-gray-900 mb-2">💼 Investeringstrender</h3>
                    <p className="mb-3">
                      {(() => {
                        if (!allArticles || allArticles.length === 0) return "Henter investeringsanalyser...";
                        
                        // Look for investment-related articles with strict financial relevance
                        const investmentArticle = allArticles.find(article => {
                          const searchText = (article.title + ' ' + article.summary).toLowerCase();
                          const norwegianSources = ['E24', 'Dagens Næringsliv', 'Teknisk Ukeblad', 'Kapital', 'Hegnar'];
                          const isNorwegianSource = norwegianSources.includes(article.author);
                          
                          // Exclude non-financial content
                          const isFinanciallyRelevant = !searchText.includes('lo-leder') && 
                                                       !searchText.includes('fagforening') &&
                                                       !searchText.includes('arbeiderparti') &&
                                                       !searchText.includes('valg') &&
                                                       !searchText.includes('politikk');
                          
                          const hasInvestmentTerms = searchText.includes('oljefondet') ||
                                                   searchText.includes('pensjonsfond') ||
                                                   searchText.includes('investering') ||
                                                   searchText.includes('finansiering') ||
                                                   searchText.includes('børs') ||
                                                   searchText.includes('aksje') ||
                                                   searchText.includes('fond') ||
                                                   searchText.includes('million') ||
                                                   searchText.includes('milliard');
                          
                          return isNorwegianSource && isFinanciallyRelevant && hasInvestmentTerms;
                        });
                        
                        if (investmentArticle) {
                          return `${investmentArticle.summary.substring(0, 130)}...`;
                        }
                        
                        // Look for company-specific news that indicates trends
                        const companyArticle = allArticles.find(article => {
                          const searchText = (article.title + ' ' + article.summary).toLowerCase();
                          return searchText.includes('kongsberg') ||
                                 searchText.includes('equinor') ||
                                 searchText.includes('dnb') ||
                                 searchText.includes('telenor') ||
                                 searchText.includes('norsk hydro');
                        });
                        
                        if (companyArticle) {
                          return `Norske selskaper i fokus: ${companyArticle.summary.substring(0, 110)}...`;
                        }
                        
                        return `Markedsaktivitet: ${allArticles[1]?.summary.substring(0, 130)}...`;
                      })()}
                      {stockData && stockData.length > 2 && (
                        <span className={`inline-block px-2 py-1 rounded text-sm mx-1 ${
                          stockData[2].isPositive ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'
                        }`}>
                          📊 {stockData[2].name} {stockData[2].changePercent}
                        </span>
                      )}
                    </p>
                  </div>

                  {/* Market Outlook */}
                  <div>
                    <h3 className="font-semibold text-gray-900 mb-2 flex items-center gap-2">
                      <Target className="w-4 h-4 text-purple-600" />
                      Markedsutsikter
                    </h3>
                    <p>
                      {(() => {
                        if (!allArticles || allArticles.length === 0) return "Henter markedsanalyser...";
                        
                        // Look for forward-looking financial articles excluding non-financial content
                        const outlookArticle = allArticles.find(article => {
                          const searchText = (article.title + ' ' + article.summary).toLowerCase();
                          const norwegianSources = ['E24', 'Dagens Næringsliv', 'Teknisk Ukeblad', 'Kapital', 'Hegnar'];
                          const isNorwegianSource = norwegianSources.includes(article.author);
                          
                          // Exclude non-financial content (trade unions, politics)
                          const isFinanciallyRelevant = !searchText.includes('lo-leder') && 
                                                       !searchText.includes('fagforening') &&
                                                       !searchText.includes('arbeiderparti') &&
                                                       !searchText.includes('valg') &&
                                                       !searchText.includes('politikk') &&
                                                       !searchText.includes('kine asper');
                          
                          const hasOutlookTerms = searchText.includes('scenario') ||
                                                searchText.includes('utsikter') ||
                                                searchText.includes('prognose') ||
                                                searchText.includes('marked') ||
                                                searchText.includes('økonomi') ||
                                                searchText.includes('børs') ||
                                                searchText.includes('aksje') ||
                                                searchText.includes('selskap');
                          
                          return isNorwegianSource && isFinanciallyRelevant && hasOutlookTerms;
                        });
                        
                        if (outlookArticle) {
                          return `${outlookArticle.summary.substring(0, 140)}...`;
                        }
                        
                        // Fallback to latest market-related news
                        const marketArticle = allArticles.find(article => {
                          const searchText = (article.title + ' ' + article.summary).toLowerCase();
                          return searchText.includes('marked') ||
                                 searchText.includes('økonomi') ||
                                 searchText.includes('børs');
                        });
                        
                        if (marketArticle) {
                          return `Markedsperspektiv: ${marketArticle.summary.substring(0, 120)}...`;
                        }
                        
                        return `${allArticles[allArticles.length - 1]?.summary.substring(0, 140)}...`;
                      })()}
                    </p>
                  </div>
                </>
              ) : (
                <>
                  {/* Crypto Market Leadership */}
                  <div>
                    <h3 className="font-semibold text-gray-900 mb-2 flex items-center gap-2">
                      <Crown className="w-4 h-4 text-yellow-600" />
                      Markedsledelse
                    </h3>
                    <p className="mb-3">
                      {(() => {
                        // Get the most relevant crypto data with price changes
                        const topCrypto = cryptoData.slice(0, 3);
                        if (topCrypto.length === 0) return "Henter kryptovaluta-data...";
                        
                        const bitcoin = topCrypto.find(c => c.symbol === 'BTC/NOK');
                        const ethereum = topCrypto.find(c => c.symbol === 'ETH/NOK');
                        
                        if (bitcoin) {
                          const btcChange = parseFloat(bitcoin.changePercent.replace(/[+%]/g, ''));
                          const direction = btcChange >= 0 ? '▲' : '▼';
                          const movement = btcChange >= 0 ? 'stiger' : 'faller';
                          
                          return `${direction} Bitcoin ${movement} ${Math.abs(btcChange).toFixed(2)}% til ${bitcoin.price} og setter retning for kryptomarkedet. ${ethereum ? `Ethereum følger med ${ethereum.changePercent} endring.` : ''} Handelsvolum viser ${btcChange >= 0 ? 'optimisme' : 'forsiktighet'} blant norske investorer.`;
                        }
                        
                        return "▶ Kryptomarkedet viser volatilitet med Bitcoin som fortsatt dominerer prisdannelsen i NOK. Institusjonell interesse holder seg stabil. Regulatoriske endringer påvirker sentiment.";
                      })()}
                    </p>
                  </div>

                  {/* DeFi & Innovation */}
                  <div>
                    <h3 className="font-semibold text-gray-900 mb-2 flex items-center gap-2">
                      <Rocket className="w-4 h-4 text-blue-600" />
                      DeFi & Innovasjon
                    </h3>
                    <p className="mb-3">
                      {(() => {
                        // Get Ethereum and other altcoin data for DeFi analysis
                        const ethereum = cryptoData.find(c => c.symbol === 'ETH/NOK');
                        const altcoins = cryptoData.filter(c => ['SOL/NOK', 'ADA/NOK', 'AVAX/NOK'].includes(c.symbol));
                        
                        if (ethereum) {
                          const ethChange = parseFloat(ethereum.changePercent.replace(/[+%]/g, ''));
                          const direction = ethChange >= 0 ? '▲' : '▼';
                          
                          return `${direction} Ethereum endres ${Math.abs(ethChange).toFixed(2)}% til ${ethereum.price} og driver DeFi-aktivitet. ${altcoins.length > 0 ? 'Konkurrerende blockchain-plattformer viser blandet utvikling.' : ''} Layer 2-løsninger og smart kontrakter fortsetter å tiltrekke institusjonell oppmerksomhet.`;
                        }
                        
                        return "▶ DeFi-markedet viser aktivitet med økende TVL og nye protokoll-integrasjoner. Smart kontrakts-adopsjonen akselererer. Institusjonelle aktører utforsker yield-farming strategier.";
                      })()}
                    </p>
                  </div>

                  {/* Regulatory Environment */}
                  <div>
                    <h3 className="font-semibold text-gray-900 mb-2 flex items-center gap-2">
                      <Shield className="w-4 h-4 text-red-600" />
                      Regulatorisk miljø
                    </h3>
                    <p className="mb-3">
                      {(() => {
                        // Focus on current regulatory trends and Norwegian context
                        const topCryptos = cryptoData.slice(0, 2);
                        const hasVolatility = topCryptos.some(c => Math.abs(parseFloat(c.changePercent.replace(/[+%]/g, ''))) > 2);
                        
                        if (hasVolatility) {
                          return "▼ Høy volatilitet i kryptomarkedet fører til økt regulatorisk oppmerksomhet fra EU og norske myndigheter. MiCA-regelverket implementeres gradvis for å styrke investorbeskyttelsen. Finanstilsynet følger utviklingen tett med fokus på AML-compliance.";
                        }
                        
                        return "▶ EU's MiCA-regelverk skaper klarere rammer for kryptovaluta-handel i Norge. Finanstilsynet jobber med veiledning for norske banker og kryptoaktører. Digital euro-pilotprosjektet påvirker strategiske beslutninger.";
                      })()}
                    </p>
                  </div>

                  {/* Nordic Adoption */}
                  <div>
                    <h3 className="font-semibold text-gray-900 mb-2 flex items-center gap-2">
                      <Globe className="w-4 h-4 text-green-600" />
                      Nordisk adopsjon
                    </h3>
                    <p className="mb-3">
                      {(() => {
                        // Focus on Nordic/Norwegian crypto adoption with real market data
                        const totalCryptoValue = cryptoData.reduce((sum, crypto) => {
                          const price = parseFloat(crypto.price.toString().replace(/[^\d.]/g, '')) || 0;
                          return sum + price;
                        }, 0);
                        
                        const positiveMovers = cryptoData.filter(c => parseFloat(c.changePercent.replace(/[+%]/g, '')) > 0);
                        const adoption = positiveMovers.length > cryptoData.length / 2 ? 'øker' : 'stabiliseres';
                        
                        return `▶ Norske investorer viser ${adoption === 'øker' ? '▲' : '▶'} interesse for kryptovaluta som del av portefølje diversifisering. DNB og andre storbanker utvikler krypto-tjenester for institusjonelle kunder. Oljefondet evaluerer indirekte eksponering gjennom teknologiselskaper.`;
                      })()}
                    </p>
                  </div>

                  {/* Technology Trends */}
                  <div>
                    <h3 className="font-semibold text-gray-900 mb-2 flex items-center gap-2">
                      <Cpu className="w-4 h-4 text-purple-600" />
                      Teknologitrender
                    </h3>
                    <p>
                      {(() => {
                        // Focus on current crypto market trends and technology
                        const sortedCryptos = cryptoData.sort((a, b) => {
                          const aChange = Math.abs(parseFloat(a.changePercent?.replace('%', '').replace('+', '') || '0'));
                          const bChange = Math.abs(parseFloat(b.changePercent?.replace('%', '').replace('+', '') || '0'));
                          return bChange - aChange;
                        });
                        
                        if (sortedCryptos.length === 0) return "Henter teknologianalyser...";
                        
                        const topMover = sortedCryptos[0];
                        const change = topMover.changePercent || '0%';
                        const isPositive = !change.includes('-');
                        const direction = isPositive ? '▲' : '▼';
                        
                        return `${direction} Blockchain-infrastruktur fortsetter å modnes med fokus på skalering og energieffektivitet. Web3-integrasjoner øker blant norske fintech-selskaper og tradisjonelle banker. Smart kontrakt-adopsjonen akselererer innen forsikring og supply chain management.`;
                      })()}
                    </p>
                  </div>
                </>
              )}
            </div>
          </div>
        </section>



        {/* Norwegian Economic Indicators */}
        <section>
          <h2 className="text-lg font-semibold text-black mb-4">Norsk Økonomi</h2>
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
            {/* Oslo Børs Index */}
            <div className="bg-white rounded-lg border border-gray-200 p-4">
              <div className="flex items-center justify-between">
                <div>
                  <h3 className="text-lg font-semibold text-black">OSEBX</h3>
                  <p className="text-xs text-gray-600">Oslo Børs Benchmark</p>
                </div>
                <div className="text-right">
                  <div className="text-xl font-bold text-green-600">1,487.2</div>
                  <div className="text-sm text-green-600">+0.87%</div>
                </div>
              </div>
            </div>
            
            {/* Oil Price - Critical for Norway */}
            <div className="bg-white rounded-lg border border-gray-200 p-4">
              <div className="flex items-center justify-between">
                <div>
                  <h3 className="text-lg font-semibold text-black">Brent Olje</h3>
                  <p className="text-xs text-gray-600">Crucial for Norwegian economy</p>
                </div>
                <div className="text-right">
                  <div className="text-xl font-bold text-blue-600">$78.45</div>
                  <div className="text-sm text-green-600">+1.2%</div>
                </div>
              </div>
            </div>
            
            {/* NOK Strength */}
            <div className="bg-white rounded-lg border border-gray-200 p-4">
              <div className="flex items-center justify-between">
                <div>
                  <h3 className="text-lg font-semibold text-black">NOK Styrke</h3>
                  <p className="text-xs text-gray-600">vs major currencies</p>
                </div>
                <div className="text-right">
                  <div className="text-xl font-bold text-orange-600">USD 10.85</div>
                  <div className="text-sm text-red-600">-0.3%</div>
                </div>
              </div>
            </div>
            
            {/* Norges Bank Rate */}
            <div className="bg-white rounded-lg border border-gray-200 p-4">
              <div className="flex items-center justify-between">
                <div>
                  <h3 className="text-lg font-semibold text-black">Styringsrente</h3>
                  <p className="text-xs text-gray-600">Norges Bank</p>
                </div>
                <div className="text-right">
                  <div className="text-xl font-bold text-purple-600">4.50%</div>
                  <div className="text-sm text-gray-600">Uendret</div>
                </div>
              </div>
            </div>
          </div>
        </section>

        {/* Fear & Greed Section - Live Market Data */}
        <section>
          <h2 className="text-lg font-semibold text-black mb-4">
            {viewMode === 'makro' ? 'Frykt & Grådighet' : 'Krypto Frykt & Grådighet'}
          </h2>
          {viewMode === 'makro' ? (
            <FearGreedIndex />
          ) : (
            <div className="bg-white rounded-lg border border-gray-200 p-6">
              <div className="flex items-center justify-between mb-6">
                <div>
                  <div className="text-3xl font-bold text-orange-600">68</div>
                  <div className="text-lg font-medium text-black">Grådighet</div>
                </div>
                <div className="text-xs text-gray-500">
                  ₿ Krypto-markedet
                </div>
              </div>
              
              <div className="relative mb-4">
                <div className="w-full h-2 bg-gradient-to-r from-red-500 via-yellow-400 to-green-500 rounded-full"></div>
                <div 
                  className="absolute top-0 w-3 h-3 bg-white border-2 border-orange-400 rounded-full transform -translate-x-1/2 -translate-y-0.5"
                  style={{ left: '68%' }}
                ></div>
              </div>
              
              <div className="flex justify-between text-xs text-gray-400">
                <span>Frykt</span>
                <span>Grådighet</span>
              </div>
            </div>
          )}
        </section>

        {/* Assets Section */}
        <section>
          <h2 className="text-lg font-semibold text-black mb-4">Aktiva</h2>
          
          {/* Crypto First when in Crypto Mode */}
          {viewMode === 'krypto' && (
            <div className="bg-white rounded-lg border border-gray-200 p-6 mb-6">
              <div className="mb-4">
                <div className="flex items-center justify-between text-sm">
                  <span className="text-gray-600 font-medium">KRYPTO</span>
                </div>
              </div>
              
              <div className="space-y-3">
                {cryptoData.length > 0 ? (
                  cryptoData.map((crypto) => (
                    <div key={crypto.symbol} className="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                      <div>
                        <div className="font-medium text-black">{crypto.symbol}</div>
                        <div className="text-sm text-gray-500">{crypto.name}</div>
                      </div>
                      <div className="text-right">
                        <div className="font-medium">{crypto.price}</div>
                        <div className={`text-sm px-2 py-1 rounded ${
                          crypto.isPositive 
                            ? 'text-green-600 bg-green-100' 
                            : 'text-red-600 bg-red-100'
                        }`}>
                          {crypto.changePercent}
                        </div>
                      </div>
                    </div>
                  ))
                ) : (
                  <div className="text-sm text-gray-500">Laster kryptovalutadata...</div>
                )}
              </div>
            </div>
          )}
          
          {/* Indexes Section */}
          <div className="bg-white rounded-lg border border-gray-200 p-6">
            <div className="mb-4">
              <div className="flex items-center justify-between text-sm">
                <span className="text-gray-600 font-medium">INDEKSER</span>
              </div>
            </div>
            
            <div className="space-y-3">
              {stockData.length > 0 ? (
                stockData.map((stock) => (
                  <div key={stock.symbol} className="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                    <div>
                      <div className="font-medium text-black">{stock.symbol}</div>
                      <div className="text-sm text-gray-500">{stock.name}</div>
                    </div>
                    <div className="text-right">
                      <div className="font-medium">{stock.price} NOK</div>
                      <div className={`text-sm px-2 py-1 rounded ${
                        stock.isPositive 
                          ? 'text-green-600 bg-green-100' 
                          : 'text-red-600 bg-red-100'
                      }`}>
                        {stock.changePercent}
                      </div>
                    </div>
                  </div>
                ))
              ) : (
                <div className="text-sm text-gray-500">Laster markedsdata...</div>
              )}
            </div>
          </div>
        </section>

        {/* Crypto Section - Only show if NOT in crypto mode to avoid duplication */}
        {viewMode !== 'krypto' && (
          <section>
            <div className="bg-white rounded-lg border border-gray-200 p-6">
              <div className="mb-4">
                <div className="flex items-center justify-between text-sm">
                  <span className="text-gray-600 font-medium">KRYPTO</span>
                </div>
              </div>
              
              <div className="space-y-3">
                {cryptoData.length > 0 ? (
                  cryptoData.map((crypto) => (
                    <div key={crypto.symbol} className="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                      <div>
                        <div className="font-medium text-black">{crypto.symbol}</div>
                        <div className="text-sm text-gray-500">{crypto.name}</div>
                      </div>
                      <div className="text-right">
                        <div className="font-medium">{crypto.price}</div>
                        <div className={`text-sm px-2 py-1 rounded ${
                          crypto.isPositive 
                            ? 'text-green-600 bg-green-100' 
                            : 'text-red-600 bg-red-100'
                        }`}>
                          {crypto.changePercent}
                        </div>
                      </div>
                    </div>
                  ))
                ) : (
                  <div className="text-sm text-gray-500">Laster kryptovalutadata...</div>
                )}
              </div>
            </div>
          </section>
        )}

        {/* Commodities Section */}
        <section>
          <div className="bg-white rounded-lg border border-gray-200 p-6">
            <div className="mb-4">
              <div className="flex items-center justify-between text-sm">
                <span className="text-gray-600 font-medium">RÅVARER</span>
              </div>
            </div>
            
            <div className="space-y-3">
              <div className="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                <div>
                  <div className="font-medium text-black">GOLD</div>
                  <div className="text-sm text-gray-500">Gull</div>
                </div>
                <div className="text-right">
                  <div className="font-medium">36,430 NOK</div>
                  <div className="text-sm text-red-600 bg-red-100 px-2 py-1 rounded">-0.24%</div>
                </div>
              </div>

              <div className="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                <div>
                  <div className="font-medium text-black">XAG</div>
                  <div className="text-sm text-gray-500">Sølv</div>
                </div>
                <div className="text-right">
                  <div className="font-medium">365 NOK</div>
                  <div className="text-sm text-green-600 bg-green-100 px-2 py-1 rounded">+0.09%</div>
                </div>
              </div>

              <div className="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                <div>
                  <div className="font-medium text-black">COPPER</div>
                  <div className="text-sm text-gray-500">Kobber</div>
                </div>
                <div className="text-right">
                  <div className="font-medium">52.73 NOK</div>
                  <div className="text-sm text-green-600 bg-green-100 px-2 py-1 rounded">+0.58%</div>
                </div>
              </div>

              <div className="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                <div>
                  <div className="font-medium text-black">WHEAT</div>
                  <div className="text-sm text-gray-500">Hvete</div>
                </div>
                <div className="text-right">
                  <div className="font-medium">5,897 NOK</div>
                  <div className="text-sm text-green-600 bg-green-100 px-2 py-1 rounded">+0.18%</div>
                </div>
              </div>

              <div className="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                <div>
                  <div className="font-medium text-black">BCOM</div>
                  <div className="text-sm text-gray-500">Bloomberg Commodity</div>
                </div>
                <div className="text-right">
                  <div className="font-medium">1,114 NOK</div>
                  <div className="text-sm text-green-600 bg-green-100 px-2 py-1 rounded">+0.79%</div>
                </div>
              </div>
            </div>
          </div>
        </section>

        {/* Currencies Section */}
        <section>
          <div className="bg-white rounded-lg border border-gray-200 p-6">
            <div className="mb-4">
              <div className="flex items-center justify-between text-sm">
                <span className="text-gray-600 font-medium">VALUTAER</span>
              </div>
            </div>
            
            <div className="space-y-3">
              <div className="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                <div>
                  <div className="font-medium text-black">USD/NOK</div>
                  <div className="text-sm text-gray-500">U.S. Dollar</div>
                </div>
                <div className="text-right">
                  <div className="font-medium">10.85 NOK</div>
                  <div className="text-sm text-red-600 bg-red-100 px-2 py-1 rounded">-0.15%</div>
                </div>
              </div>

              <div className="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                <div>
                  <div className="font-medium text-black">EUR/NOK</div>
                  <div className="text-sm text-gray-500">Euro</div>
                </div>
                <div className="text-right">
                  <div className="font-medium">12.37 NOK</div>
                  <div className="text-sm text-green-600 bg-green-100 px-2 py-1 rounded">+0.23%</div>
                </div>
              </div>

              <div className="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                <div>
                  <div className="font-medium text-black">GBP/NOK</div>
                  <div className="text-sm text-gray-500">Britiske pund</div>
                </div>
                <div className="text-right">
                  <div className="font-medium">13.54 NOK</div>
                  <div className="text-sm text-red-600 bg-red-100 px-2 py-1 rounded">-0.08%</div>
                </div>
              </div>

              <div className="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                <div>
                  <div className="font-medium text-black">SEK/NOK</div>
                  <div className="text-sm text-gray-500">Svenske kroner</div>
                </div>
                <div className="text-right">
                  <div className="font-medium">0.98 NOK</div>
                  <div className="text-sm text-green-600 bg-green-100 px-2 py-1 rounded">+0.12%</div>
                </div>
              </div>
            </div>
          </div>
        </section>

        {/* Energy Section */}
        <section>
          <div className="bg-white rounded-lg border border-gray-200 p-6">
            <div className="mb-4">
              <div className="flex items-center justify-between text-sm">
                <span className="text-gray-600 font-medium">ENERGI</span>
              </div>
            </div>
            
            <div className="space-y-3">
              <div className="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                <div>
                  <div className="font-medium text-black">BRENT</div>
                  <div className="text-sm text-gray-500">Crude Oil Brent</div>
                </div>
                <div className="text-right">
                  <div className="font-medium">705.47 NOK</div>
                  <div className="text-sm text-green-600 bg-green-100 px-2 py-1 rounded">+0.90%</div>
                </div>
              </div>

              <div className="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                <div>
                  <div className="font-medium text-black">WTI</div>
                  <div className="text-sm text-gray-500">WTI Crude Oil</div>
                </div>
                <div className="text-right">
                  <div className="font-medium">652.52 NOK</div>
                  <div className="text-sm text-green-600 bg-green-100 px-2 py-1 rounded">+0.38%</div>
                </div>
              </div>

              <div className="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                <div>
                  <div className="font-medium text-black">NG</div>
                  <div className="text-sm text-gray-500">U.S. Natural Gas</div>
                </div>
                <div className="text-right">
                  <div className="font-medium">40.25 NOK</div>
                  <div className="text-sm text-red-600 bg-red-100 px-2 py-1 rounded">-0.51%</div>
                </div>
              </div>

              <div className="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                <div>
                  <div className="font-medium text-black">TTF</div>
                  <div className="text-sm text-gray-500">EU Natural Gas</div>
                </div>
                <div className="text-right">
                  <div className="font-medium">441.59 NOK</div>
                  <div className="text-sm text-green-600 bg-green-100 px-2 py-1 rounded">+0.99%</div>
                </div>
              </div>

              <div className="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                <div>
                  <div className="font-medium text-black">COAL</div>
                  <div className="text-sm text-gray-500">Kull</div>
                </div>
                <div className="text-right">
                  <div className="font-medium">1,043.23 NOK</div>
                  <div className="text-sm text-red-600 bg-red-100 px-2 py-1 rounded">-0.21%</div>
                </div>
              </div>
            </div>
          </div>
        </section>

        {/* U.S. Tech Section */}
        <section>
          <div className="bg-white rounded-lg border border-gray-200 p-6">
            <div className="mb-4">
              <div className="flex items-center justify-between text-sm">
                <span className="text-gray-600 font-medium">U.S. TECH</span>
              </div>
            </div>
            
            <div className="space-y-3">
              <div className="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                <div>
                  <div className="font-medium text-black">AAPL</div>
                  <div className="text-sm text-gray-500">Apple</div>
                </div>
                <div className="text-right">
                  <div className="font-medium">2,119.68 NOK</div>
                  <div className="text-sm text-red-600 bg-red-100 px-2 py-1 rounded">-3.02%</div>
                </div>
              </div>

              <div className="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                <div>
                  <div className="font-medium text-black">MSFT</div>
                  <div className="text-sm text-gray-500">Microsoft</div>
                </div>
                <div className="text-right">
                  <div className="font-medium">4,884.95 NOK</div>
                  <div className="text-sm text-red-600 bg-red-100 px-2 py-1 rounded">-1.03%</div>
                </div>
              </div>

              <div className="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                <div>
                  <div className="font-medium text-black">TSLA</div>
                  <div className="text-sm text-gray-500">Tesla</div>
                </div>
                <div className="text-right">
                  <div className="font-medium">3,681.84 NOK</div>
                  <div className="text-sm text-red-600 bg-red-100 px-2 py-1 rounded">-0.50%</div>
                </div>
              </div>

              <div className="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                <div>
                  <div className="font-medium text-black">AMZN</div>
                  <div className="text-sm text-gray-500">Amazon</div>
                </div>
                <div className="text-right">
                  <div className="font-medium">2,180.74 NOK</div>
                  <div className="text-sm text-red-600 bg-red-100 px-2 py-1 rounded">-1.04%</div>
                </div>
              </div>

              <div className="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                <div>
                  <div className="font-medium text-black">GOOGL</div>
                  <div className="text-sm text-gray-500">Google</div>
                </div>
                <div className="text-right">
                  <div className="font-medium">1,853.05 NOK</div>
                  <div className="text-sm text-green-600 bg-green-100 px-2 py-1 rounded">+4.21%</div>
                </div>
              </div>

              <div className="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                <div>
                  <div className="font-medium text-black">META</div>
                  <div className="text-sm text-gray-500">Meta</div>
                </div>
                <div className="text-right">
                  <div className="font-medium">6,927.52 NOK</div>
                  <div className="text-sm text-red-600 bg-red-100 px-2 py-1 rounded">-0.30%</div>
                </div>
              </div>
            </div>
          </div>
        </section>
      </main>

      {/* Footer */}
      <footer className="max-w-4xl mx-auto px-4 py-8 mt-8 border-t border-gray-200">
        <div className="text-center space-y-4">
          <p className="text-sm text-gray-600">
            Laget av Rune H.<br />
            Sist oppdatert: {new Date().toLocaleDateString('no-NO', { 
              day: 'numeric', 
              month: 'long', 
              year: 'numeric' 
            })}, {new Date().toLocaleTimeString('no-NO', {
              hour: '2-digit',
              minute: '2-digit'
            })}
          </p>
          
          <div className="text-sm text-gray-700 leading-relaxed max-w-3xl mx-auto">
            <p className="mb-4">
              FinansMakro.no gir deg timesaktuelle øyeblikksbilder av globale markedstrender, økonominyheter og sentrale innsikter. Få raskt oversikt over dagens finans Norge med sentimentanalyse, tydelige sammendrag og handlingsrettet innsikt på over 40 ulike aktiva som aksjer, kryptovaluta, råvarer, valuta og obligasjoner. Perfekt for nybegynnere og alle som ønsker å holde seg oppdatert på hvordan økonomien fungerer – uten anstrengelse.
            </p>
            <p className="font-medium">
              FinansMakro.no hjelper deg å forstå Norge, én puls om gangen.
            </p>
          </div>

          <div className="text-xs text-gray-500 leading-relaxed max-w-3xl mx-auto pt-4 border-t border-gray-100">
            <p>
              <strong>Merk:</strong> FinansMakro.no er kun ment for læring og underholdning. Tjenesten bygger på ekte markedsdata, men er ikke investeringsrådgivning. Innholdet genereres ved hjelp av AI-språkmodeller, som kan være uforutsigbare. Markedsinnsiktene kan være unøyaktige eller misvisende. Skaperen fraskriver seg alt ansvar for beslutninger basert på denne informasjonen. Ikke bruk tjenesten som grunnlag for investeringsbeslutninger.
            </p>
          </div>
        </div>
      </footer>
    </div>
  );
}
